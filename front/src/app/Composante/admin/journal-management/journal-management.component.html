<div class="card table-card">
  <h2>Liste des journaux</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nom journal</th>
        <th>Nom projet</th>
        <th>Budgets associés</th>
        <th>Valideurs RH associés</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let journal of journals">
        <td>{{ journal.id_journal }}</td>
        <td>{{ journal.nom_journal }}</td>
        <td>{{ journal.nom_projet }}</td>
        <td>
          <ul *ngIf="journal.budgets?.length > 0">
            <li *ngFor="let b of journal.budgets">
              {{ b.code_budget }} ({{ b.annee_fiscale }})
            </li>
          </ul>
          <span *ngIf="!journal.budgets || journal.budgets.length === 0">
            Aucun budget associé
          </span>
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
          <ul *ngIf="getValideursRH(journal).length > 0">
            <li *ngFor="let v of getValideursRH(journal)">
              {{ v.username }}
              <span *ngIf="v.ordre">(ordre: {{ v.ordre }})</span>
            </li>
          </ul>
          <span *ngIf="getValideursRH(journal).length === 0">
            Aucun valideur RH associé
          </span>
        </td>
        <td>
          <a href="javascript:void(0)" class="action-btn edit-btn" (click)="editJournal(journal)" title="Modifier">
            <i class="fas fa-pencil-alt"></i>
          </a>
          <a href="javascript:void(0)" class="action-btn delete-btn" (click)="deleteJournal(journal.id_journal)" title="Supprimer">
            <i class="fas fa-trash-alt"></i>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
</div>
