<div class="flex-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="header-container">
      <img src="/images/salafan.jpg" alt="Logo SALFA" class="header-logo">
      <h6 class="header-title">Sampan'Asa Loterana momba ny FAhasalamana</h6>
    </div>

    <nav>
      <a role="button" [class.active]="activePage === 'Dashboard'" (click)="setActivePage('Dashboard')">
        <i class="fas fa-chart-line"></i>
        <span class="hidden-mobile">Tableau de Bord</span>
      </a>
      <a role="button" [class.active]="activePage === 'Users'" (click)="setActivePage('Users')">
        <i class="fas fa-users"></i>
        <span class="hidden-mobile">Utilisateurs</span>
      </a>
      <a role="button" [class.active]="activePage === 'personne'" (click)="setActivePage('personne')">
        <i class="fas fa-user-tie"></i>
        <span class="hidden-mobile">Responsable</span>
      </a>
      <a role="button" [class.active]="activePage === 'Journal'" (click)="setActivePage('Journal')">
        <i class="fas fa-book"></i>
        <span class="hidden-mobile">Journal</span>
      </a>
      <a role="button" [class.active]="activePage === 'budget'" (click)="setActivePage('budget')">
        <i class="fas fa-wallet"></i>
        <span class="hidden-mobile">Budget</span>
      </a>
    </nav>
  </aside>

  <!-- Contenu -->
  <main class="main-content">
    <div class="card">
      <div *ngIf="activePage === 'Dashboard'">
        <div class="dashboard-header">
          <h1>üìä Tableau de Bord Administrateur</h1>
          <div class="last-update">Derni√®re mise √† jour: {{ lastUpdate | date:'dd/MM/yyyy HH:mm' }}</div>
        </div>

        <!-- Statistiques principales -->
        <div class="stats-grid">
          <div class="stat-card users">
            <div class="stat-icon"><i class="fas fa-users"></i></div>
            <div class="stat-content">
              <h3>Utilisateurs</h3>
              <p class="stat-number">{{ userCount }}</p>
              <div class="stat-actions">
                <button class="action-btn" (click)="setActivePage('Users')">
                  <i class="fas fa-cog"></i> G√©rer
                </button>
              </div>
            </div>
          </div>

          <div class="stat-card responsables">
            <div class="stat-icon"><i class="fas fa-user-tie"></i></div>
            <div class="stat-content">
              <h3>Responsables</h3>
              <p class="stat-number">{{ personneCount }}</p>
              <div class="stat-actions">
                <button class="action-btn" (click)="setActivePage('personne')">
                  <i class="fas fa-cog"></i> G√©rer
                </button>
              </div>
            </div>
          </div>

          <div class="stat-card journaux">
            <div class="stat-icon"><i class="fas fa-book"></i></div>
            <div class="stat-content">
              <h3>Journaux</h3>
              <p class="stat-number">{{ journalCount }}</p>
              <div class="stat-actions">
                <button class="action-btn" (click)="setActivePage('Journal')">
                  <i class="fas fa-cog"></i> G√©rer
                </button>
              </div>
            </div>
          </div>

          <!--div class="stat-card budgets">
            <div class="stat-icon"><i class="fas fa-wallet"></i></div>
            <div class="stat-content">
              <h3>Budgets Totaux</h3>
              <p class="stat-number">{{ totalBudget | number:'1.2-2' }}</p>
              <div class="stat-actions">
                <button class="action-btn" (click)="setActivePage('budget')">
                  <i class="fas fa-cog"></i> G√©rer
                </button>
              </div>
            </div>
          </div-->
        </div>

        <!-- R√©sum√© des activit√©s r√©centes -->
        <div class="summary-section">
          <div class="summary-card">
            <h3>Activit√©s R√©centes</h3>
            <div class="activities-list">
              <div class="activity-item" *ngFor="let activity of recentActivities">
                <div class="activity-icon" [ngClass]="activity.type">
                  <i [class]="activity.icon"></i>
                </div>
                <div class="activity-content">
                  <p class="activity-text">{{ activity.text }}</p>
                  <span class="activity-time">{{ activity.time }}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="summary-card">
            <h3>Statut du Syst√®me</h3>
            <div class="system-status">
              <div class="status-item">
                <span class="status-label">Base de donn√©es</span>
                <span class="status-indicator connected"></span>
                <span class="status-text">Connect√©e</span>
              </div>
              <div class="status-item">
                <span class="status-label">Services API</span>
                <span class="status-indicator connected"></span>
                <span class="status-text">Op√©rationnels</span>
              </div>
              <div class="status-item">
                <span class="status-label">S√©curit√©</span>
                <span class="status-indicator connected"></span>
                <span class="status-text">Active</span>
              </div>
              <div class="status-item">
                <span class="status-label">Sauvegarde</span>
                <span class="status-indicator warning"></span>
                <span class="status-text">Planifi√©e</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Composants de gestion CRUD -->
      <app-user-management *ngIf="activePage === 'Users'"></app-user-management>
      <app-personne *ngIf="activePage === 'personne'"></app-personne>
      <app-budget-management *ngIf="activePage === 'budget'"></app-budget-management>
      <app-journal-management *ngIf="activePage === 'Journal'"></app-journal-management>
    </div>
  </main>
</div>

<!-- Scroll to top -->
<button (click)="scrollToTop()" class="scroll-to-top" title="Remonter en haut">
  <i class="fas fa-arrow-up"></i>
</button>